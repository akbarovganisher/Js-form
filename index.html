<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>index</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <style>
        .none {
            display: none;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="row">
            <h1>JavaScrip Amalyot</h1>

            <form id="contact-form">
                <label class="form-label" for="name">Name</label>
                <input placeholder="Name" type="text" id="name" class="form-control" required>

                <label class="form-label" for="email">Email</label>
                <input placeholder="Email" type="text" id="email" class="form-control" required>

                <label class="form-label" for="phone">Phone</label>
                <input placeholder="Phone" type="tel" id="phone" class="form-control" required>

                <button type="submit" class="btn btn-primary my-4">Submit</button>
            </form>

            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">Id</th>
                        <th scope="col">Name</th>
                        <th scope="col">Email</th>
                        <th scope="col">Phone</th>
                        <th scope="col">Delete</th>
                    </tr>
                </thead>
                <tbody id="contact-table-body"></tbody>
            </table>
        </div>
    </div>

    <script>
        let con = [
            { id: 0, name: "Akbarov G'anisher", email: "akbarovganisher333@gmail.com", phone: "+998994576212", delete: "x" },
            { id: 0, name: "Akbarov Shaxriyor", email: "shaxriyor44@gmail.com", phone: "+998919039255", delete: "x" },
            { id: 0, name: "Xayriyer Javohir", email: "javohir5566@gmail.com", phone: "+998996665566", delete: "x" }
        ];

        let tBody = document.getElementById('contact-table-body');

        for (let i = 0; i < con.length; i++) {

            cons = con[i];

            let row = document.createElement('tr');

            let callId = document.createElement('td');
            callId.textContent = cons.id + i + 1;
            row.appendChild(callId);

            let callName = document.createElement('td');
            callName.textContent = cons.name;
            row.appendChild(callName);
            let callEmail = document.createElement('td');
            callEmail.textContent = cons.email;
            row.appendChild(callEmail);
            let callPhone = document.createElement('td');
            callPhone.textContent = cons.phone;
            row.appendChild(callPhone);

            let callDelete = document.createElement('td');
            callDelete.textContent = cons.delete;
            row.appendChild(callDelete);

            callDelete.addEventListener('click', () => {
                row.classList.add('none')
            });


            tBody.appendChild(row);
        }

        let contactForm = document.getElementById('contact-form');

        contactForm.addEventListener('submit', (e) => {
            e.preventDefault();

            let inputName = document.getElementById('name');
            let inputEmail = document.getElementById('email');
            let inputPhone = document.getElementById('phone');

            let newCon = {
                id: 0, name: inputName.value, email: inputEmail.value, phone: inputPhone.value
            }

            con.push(newCon);

            cons = con[con.length - 1];

            let row = document.createElement('tr');

            for (let i = con.length - 1; i < con.length; i++) {

                let callId = document.createElement('td');
                callId.textContent = cons.id + i + 1;
                row.appendChild(callId);

            }

            let callName = document.createElement('td');
            callName.textContent = cons.name;
            row.appendChild(callName);
            let callEmail = document.createElement('td');
            callEmail.textContent = cons.email;
            row.appendChild(callEmail);
            let callPhone = document.createElement('td');
            callPhone.textContent = cons.phone;
            row.appendChild(callPhone);

            for (let i = con.length - 1; i < con.length; i++) {

                let callId = document.createElement('td');
                callId.textContent = "x";
                row.appendChild(callId);

                callId.addEventListener('click', () => {
                    row.classList.add('none')
                });

            }

            tBody.appendChild(row);
        });



    </script>

</body>

</html>